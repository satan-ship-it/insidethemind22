<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Abnormality: An Interactive Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #334155; }
        
        /* Custom Chart Container Styles */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Interactive Element Transitions */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .tab-btn.active {
            border-bottom: 2px solid #0f766e;
            color: #0f766e;
            font-weight: 600;
        }

        .hidden-content {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        /* Custom scrollbar for disorder list */
        .disorder-list::-webkit-scrollbar {
            width: 6px;
        }
        .disorder-list::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .disorder-list::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }

        /* Modal Animation */
        .modal-enter {
            animation: fade-in 0.2s ease-out forwards;
        }
        @keyframes fade-in {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals with Teal Accents (Slate text, Teal primary, Amber warnings) -->
    <!-- Application Structure Plan: 
         1. Hero Section: Title and core concept intro.
         2. Foundations Module: Interactive 4Ds grid and Norms vs. Maladaptive toggle.
         3. Timeline & Evolution: Vertical stepper to explore historical shifts.
         4. Etiology Dashboard: Interactive selector for models (Bio, Psycho, Social). Includes a Chart.js viz for Neurotransmitters and a slider for Diathesis-Stress.
         5. Disorder Taxonomy: Split-view explorer. Sidebar for categories, main area for cards. CLICKING cards opens a detailed Modal.
         6. Synthesis: Summary footer.
    -->
    <!-- Visualization & Content Choices:
         - The Four Ds: Hover-reveal cards.
         - Neurotransmitters: Chart.js Bar Chart.
         - Diathesis-Stress: HTML/JS Range Slider + Progress Meter.
         - Disorder List: Filterable Grid with MODAL interactions for deep dives.
         - Historical Timeline: Clickable Step UI.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="antialiased">

    <!-- Navigation -->
    <nav class="bg-white sticky top-0 z-40 shadow-sm border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <span class="text-xl font-bold text-slate-800 tracking-tight">Psych<span class="text-teal-600">Insight</span></span>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <button onclick="scrollToSection('foundations')" class="text-slate-500 hover:text-teal-600 px-3 py-2 text-sm font-medium transition-colors">Foundations</button>
                    <button onclick="scrollToSection('history')" class="text-slate-500 hover:text-teal-600 px-3 py-2 text-sm font-medium transition-colors">History</button>
                    <button onclick="scrollToSection('etiology')" class="text-slate-500 hover:text-teal-600 px-3 py-2 text-sm font-medium transition-colors">Causes</button>
                    <button onclick="scrollToSection('disorders')" class="text-slate-500 hover:text-teal-600 px-3 py-2 text-sm font-medium transition-colors">Disorders</button>
                </div>
                <!-- Mobile menu button placeholder -->
                <div class="flex items-center md:hidden">
                    <button onclick="document.getElementById('mobile-menu').classList.toggle('hidden')" class="text-slate-500 p-2">Menu</button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-b border-slate-100 p-4">
            <div class="flex flex-col space-y-2">
                <button onclick="scrollToSection('foundations')" class="text-left text-slate-600 py-2">Foundations</button>
                <button onclick="scrollToSection('history')" class="text-left text-slate-600 py-2">History</button>
                <button onclick="scrollToSection('etiology')" class="text-left text-slate-600 py-2">Causes</button>
                <button onclick="scrollToSection('disorders')" class="text-left text-slate-600 py-2">Disorders</button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="bg-white">
        <div class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold text-slate-900 sm:text-5xl sm:tracking-tight lg:text-6xl">
                Concepts of <span class="text-teal-600">Abnormality</span>
            </h1>
            <p class="mt-4 max-w-2xl mx-auto text-xl text-slate-500">
                Explore the criteria, history, causes, and classifications of psychological disorders through an interactive lens.
            </p>
            <div class="mt-8">
                <button onclick="scrollToSection('foundations')" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-teal-600 hover:bg-teal-700">
                    Start Exploring
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-20">

        <!-- SECTION 1: FOUNDATIONS -->
        <section id="foundations" class="scroll-mt-20">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900">Foundations of Abnormality</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">
                    Before categorizing disorders, we must define what constitutes "abnormal" behavior. Psychologists rely on specific criteria and societal contexts to make these distinctions.
                </p>
            </div>

            <!-- The 4 Ds Grid -->
            <div class="mb-12">
                <h3 class="text-xl font-semibold text-slate-800 mb-6 border-l-4 border-teal-500 pl-3">The Four Ds of Abnormality</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Deviance -->
                    <div class="interactive-card bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-teal-200 cursor-pointer group" onclick="toggleCard(this)">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-bold text-slate-800">Deviance</h4>
                            <span class="bg-teal-100 text-teal-800 text-xs font-bold px-2 py-1 rounded">Extreme</span>
                        </div>
                        <p class="text-slate-600 text-sm leading-relaxed">Behavior that is extreme, unusual, or bizarre. It differs markedly from societal norms.</p>
                        <div class="mt-4 pt-4 border-t border-slate-100 text-xs text-slate-400 group-hover:text-teal-600 transition-colors">
                            Click to highlight
                        </div>
                    </div>
                    <!-- Distress -->
                    <div class="interactive-card bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-teal-200 cursor-pointer group" onclick="toggleCard(this)">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-bold text-slate-800">Distress</h4>
                            <span class="bg-rose-100 text-rose-800 text-xs font-bold px-2 py-1 rounded">Upsetting</span>
                        </div>
                        <p class="text-slate-600 text-sm leading-relaxed">Behavior that is unpleasant and upsetting to the individual or to those around them.</p>
                        <div class="mt-4 pt-4 border-t border-slate-100 text-xs text-slate-400 group-hover:text-teal-600 transition-colors">
                            Click to highlight
                        </div>
                    </div>
                    <!-- Dysfunction -->
                    <div class="interactive-card bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-teal-200 cursor-pointer group" onclick="toggleCard(this)">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-bold text-slate-800">Dysfunction</h4>
                            <span class="bg-amber-100 text-amber-800 text-xs font-bold px-2 py-1 rounded">Interference</span>
                        </div>
                        <p class="text-slate-600 text-sm leading-relaxed">Interference with the person's ability to conduct daily activities effectively.</p>
                        <div class="mt-4 pt-4 border-t border-slate-100 text-xs text-slate-400 group-hover:text-teal-600 transition-colors">
                            Click to highlight
                        </div>
                    </div>
                    <!-- Danger -->
                    <div class="interactive-card bg-white p-6 rounded-xl shadow-sm border border-slate-100 hover:border-teal-200 cursor-pointer group" onclick="toggleCard(this)">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-bold text-slate-800">Danger</h4>
                            <span class="bg-red-100 text-red-800 text-xs font-bold px-2 py-1 rounded">Risk</span>
                        </div>
                        <p class="text-slate-600 text-sm leading-relaxed">Behavior that poses a risk of harm to the individual (self-harm) or to others.</p>
                        <div class="mt-4 pt-4 border-t border-slate-100 text-xs text-slate-400 group-hover:text-teal-600 transition-colors">
                            Click to highlight
                        </div>
                    </div>
                </div>
            </div>

            <!-- Approaches Switcher -->
            <div class="bg-slate-50 rounded-2xl p-6 md:p-8 border border-slate-200">
                <div class="flex flex-col md:flex-row items-center justify-between mb-6">
                    <h3 class="text-lg font-semibold text-slate-800">Distinguishing Normal from Abnormal</h3>
                    <div class="flex space-x-2 mt-4 md:mt-0 bg-slate-200 p-1 rounded-lg">
                        <button onclick="setApproach('norms')" id="btn-norms" class="px-4 py-2 text-sm font-medium rounded-md bg-white shadow-sm text-slate-800 transition-all">Social Norms</button>
                        <button onclick="setApproach('maladaptive')" id="btn-maladaptive" class="px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all">Maladaptive Behavior</button>
                    </div>
                </div>
                
                <div id="content-norms" class="grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="text-teal-700 font-bold mb-2">Deviation from Social Norms</h4>
                        <p class="text-slate-600 mb-4">Behavior is labeled abnormal if it violates stated or unstated societal rules of conduct.</p>
                        <div class="bg-amber-50 border-l-4 border-amber-400 p-4 text-sm text-amber-800">
                            <strong>Key Critique:</strong> Cultural Relativity. What is accepted in a competitive society (e.g., aggression) may be abnormal in a cooperative one.
                        </div>
                    </div>
                    <div class="h-40 bg-white rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center text-slate-400 text-center p-4">
                        <div class="text-4xl mb-2">üåç</div>
                        <div>Context Matters:<br>Rules vary by culture.</div>
                    </div>
                </div>

                <div id="content-maladaptive" class="hidden grid md:grid-cols-2 gap-8 items-center">
                    <div>
                        <h4 class="text-teal-700 font-bold mb-2">Maladaptive Behavior</h4>
                        <p class="text-slate-600 mb-4">Focuses on individual well-being. Behavior is abnormal if it interferes with optimal functioning, growth, and self-actualization.</p>
                        <ul class="list-disc list-inside text-sm text-slate-600 space-y-2">
                            <li>Implies inability to adapt to challenges.</li>
                            <li>Focuses on vulnerability or environmental stress.</li>
                            <li>Prioritizes the person's internal experience over external rules.</li>
                        </ul>
                    </div>
                    <div class="h-40 bg-white rounded-lg border-2 border-dashed border-slate-300 flex items-center justify-center text-slate-400 text-center p-4">
                        <div class="text-4xl mb-2">üå±</div>
                        <div>Growth Blocked:<br>Interference with potential.</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 2: HISTORY -->
        <section id="history" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-slate-900 mb-4">Evolution of Perspectives</h2>
            <p class="text-lg text-slate-600 mb-10">How humanity has understood and treated psychological disorders has shifted radically throughout history.</p>

            <div class="relative border-l-2 border-teal-200 ml-4 space-y-10">
                <!-- Supernatural -->
                <div class="relative pl-8">
                    <span class="absolute -left-2.5 top-0 bg-teal-500 w-5 h-5 rounded-full border-4 border-white"></span>
                    <h3 class="font-bold text-lg text-slate-800">Supernatural Approach</h3>
                    <p class="text-sm text-slate-500 mb-2">Ancient Times - Middle Ages</p>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
                        <p class="text-slate-600 mb-2">Attributed to magical forces, evil spirits (bhoot-pret), or the devil.</p>
                        <div class="flex flex-wrap gap-2 text-xs">
                            <span class="bg-slate-100 px-2 py-1 rounded">Treatment: Exorcism</span>
                            <span class="bg-slate-100 px-2 py-1 rounded">Healers: Ojha/Shaman</span>
                        </div>
                    </div>
                </div>

                <!-- Biological -->
                <div class="relative pl-8">
                    <span class="absolute -left-2.5 top-0 bg-teal-500 w-5 h-5 rounded-full border-4 border-white"></span>
                    <h3 class="font-bold text-lg text-slate-800">Biological (Organic) Approach</h3>
                    <p class="text-sm text-slate-500 mb-2">Greek Antiquity (Hippocrates/Galen)</p>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
                        <p class="text-slate-600 mb-2">Strange behavior results from defective body processes. Temperament linked to body fluids.</p>
                        <div class="grid grid-cols-2 gap-4 text-xs mt-3 bg-slate-50 p-2 rounded">
                            <div>
                                <strong>Greek Humours:</strong> Blood, Black Bile, Yellow Bile, Phlegm.
                            </div>
                            <div>
                                <strong>Indian Ayurveda:</strong> Vata, Pitta, Kapha (Doshas).
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Psychological -->
                <div class="relative pl-8">
                    <span class="absolute -left-2.5 top-0 bg-teal-500 w-5 h-5 rounded-full border-4 border-white"></span>
                    <h3 class="font-bold text-lg text-slate-800">Psychological Approach</h3>
                    <p class="text-sm text-slate-500 mb-2">Renaissance & Age of Reason</p>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
                        <p class="text-slate-600 mb-2">Disorders arise from problems in thinking, feeling, or perceiving.</p>
                        <ul class="text-sm text-slate-600 list-disc list-inside">
                            <li><strong>Renaissance:</strong> Humanistic focus on conflict (Johann Weyer).</li>
                            <li><strong>Reform Movement:</strong> Scientific method, deinstitutionalization, community care.</li>
                        </ul>
                    </div>
                </div>

                <!-- Interactional -->
                <div class="relative pl-8">
                    <span class="absolute -left-2.5 top-0 bg-teal-500 w-5 h-5 rounded-full border-4 border-white"></span>
                    <h3 class="font-bold text-lg text-slate-800">Interactional Approach</h3>
                    <p class="text-sm text-slate-500 mb-2">Modern Era</p>
                    <div class="bg-teal-50 p-4 rounded-lg shadow-sm border border-teal-100">
                        <p class="text-slate-800 font-medium mb-1">The Bio-Psycho-Social Model</p>
                        <p class="text-slate-600 text-sm">Recognizes that biological, psychological, and social factors interact to influence disorders.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: ETIOLOGY & FACTORS -->
        <section id="etiology" class="scroll-mt-20">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-slate-900">Factors Underlying Behavior</h2>
                <p class="mt-4 text-lg text-slate-600">
                    Understanding the <em>etiology</em> (cause) of disorders requires looking at biological mechanics, psychological patterns, and social forces.
                </p>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                <!-- Tab Navigation -->
                <div class="flex border-b border-slate-200 overflow-x-auto">
                    <button class="tab-btn active px-6 py-4 text-sm font-medium whitespace-nowrap" onclick="switchEtiologyTab('bio')">Biological Factors</button>
                    <button class="tab-btn px-6 py-4 text-sm font-medium text-slate-500 hover:text-slate-700 whitespace-nowrap" onclick="switchEtiologyTab('psycho')">Psychological Models</button>
                    <button class="tab-btn px-6 py-4 text-sm font-medium text-slate-500 hover:text-slate-700 whitespace-nowrap" onclick="switchEtiologyTab('social')">Socio-Cultural</button>
                    <button class="tab-btn px-6 py-4 text-sm font-medium text-slate-500 hover:text-slate-700 whitespace-nowrap" onclick="switchEtiologyTab('stress')">Diathesis-Stress</button>
                </div>

                <!-- Tab Content -->
                <div class="p-6 md:p-10 min-h-[500px]">
                    
                    <!-- Biological Tab -->
                    <div id="tab-bio" class="etiology-content">
                        <div class="grid lg:grid-cols-2 gap-10">
                            <div>
                                <h3 class="text-xl font-bold text-slate-800 mb-4">Neurotransmitters & Genetics</h3>
                                <p class="text-slate-600 mb-4">
                                    This model focuses on faulty genes, endocrine imbalances, and problems in signal transmission across the synapse.
                                </p>
                                <ul class="space-y-3">
                                    <li class="flex items-start">
                                        <span class="w-24 font-bold text-sm text-teal-700 shrink-0">GABA</span>
                                        <span class="text-sm text-slate-600">Low activity linked to Anxiety.</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="w-24 font-bold text-sm text-teal-700 shrink-0">Dopamine</span>
                                        <span class="text-sm text-slate-600">Excess activity linked to Schizophrenia.</span>
                                    </li>
                                    <li class="flex items-start">
                                        <span class="w-24 font-bold text-sm text-teal-700 shrink-0">Serotonin</span>
                                        <span class="text-sm text-slate-600">Low activity linked to Depression.</span>
                                    </li>
                                </ul>
                                <div class="mt-6 p-4 bg-slate-50 rounded text-sm text-slate-500">
                                    Genetic factors typically involve a <em>combination</em> of genes creating a predisposition, rather than a single gene.
                                </div>
                            </div>
                            <div>
                                <h4 class="text-sm font-bold text-slate-400 uppercase tracking-wide mb-2 text-center">Neurotransmitter Activity Levels</h4>
                                <div class="chart-container">
                                    <canvas id="bioChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Psychological Tab -->
                    <div id="tab-psycho" class="etiology-content hidden">
                        <h3 class="text-xl font-bold text-slate-800 mb-6">Psychological Models</h3>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                                <h4 class="font-bold text-indigo-800 mb-2">Psychodynamic (Freud)</h4>
                                <p class="text-sm text-indigo-900/80 mb-2">Behavior determined by unconscious conflicts.</p>
                                <div class="flex gap-2 text-xs font-mono mt-2">
                                    <span class="bg-white px-2 py-1 rounded border border-indigo-200">Id (Instincts)</span>
                                    <span class="bg-white px-2 py-1 rounded border border-indigo-200">Ego (Reason)</span>
                                    <span class="bg-white px-2 py-1 rounded border border-indigo-200">Superego (Morality)</span>
                                </div>
                            </div>
                            <div class="bg-emerald-50 p-6 rounded-xl border border-emerald-100">
                                <h4 class="font-bold text-emerald-800 mb-2">Behavioral</h4>
                                <p class="text-sm text-emerald-900/80">Maladaptive behaviors are learned and can be unlearned.</p>
                                <ul class="list-disc list-inside text-xs mt-2 text-emerald-800">
                                    <li>Classical Conditioning (Association)</li>
                                    <li>Operant Conditioning (Reward/Punishment)</li>
                                    <li>Social Learning (Imitation)</li>
                                </ul>
                            </div>
                            <div class="bg-sky-50 p-6 rounded-xl border border-sky-100">
                                <h4 class="font-bold text-sky-800 mb-2">Cognitive</h4>
                                <p class="text-sm text-sky-900/80">Abnormality arises from irrational assumptions and illogical thinking.</p>
                                <p class="text-xs mt-2 italic">Example: Overgeneralization (drawing broad negative conclusions from single events).</p>
                            </div>
                            <div class="bg-amber-50 p-6 rounded-xl border border-amber-100">
                                <h4 class="font-bold text-amber-800 mb-2">Humanistic-Existential</h4>
                                <p class="text-sm text-amber-900/80">Drive for self-actualization.</p>
                                <p class="text-xs mt-2">Problems arise when individuals fail to accept responsibility for their existence or are blocked from fulfilling their potential.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Social Tab -->
                    <div id="tab-social" class="etiology-content hidden">
                        <div class="flex flex-col items-center justify-center text-center h-full max-w-2xl mx-auto">
                            <div class="text-5xl mb-4">üèòÔ∏è</div>
                            <h3 class="text-xl font-bold text-slate-800 mb-4">Socio-Cultural Factors</h3>
                            <p class="text-slate-600 mb-8">Examines social forces like war, discrimination, and economic instability.</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full text-left">
                                <div class="p-4 border border-slate-200 rounded-lg">
                                    <h4 class="font-bold text-slate-700">Family Structure</h4>
                                    <p class="text-sm text-slate-500 mt-1">E.g., Enmeshed families (over-involvement) leading to a lack of independence.</p>
                                </div>
                                <div class="p-4 border border-slate-200 rounded-lg">
                                    <h4 class="font-bold text-slate-700">Societal Labels</h4>
                                    <p class="text-sm text-slate-500 mt-1">Once labeled "mentally ill," an individual may accept the "sick role," exacerbating the disturbance.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Diathesis-Stress Tab -->
                    <div id="tab-stress" class="etiology-content hidden">
                        <div class="max-w-3xl mx-auto">
                            <h3 class="text-xl font-bold text-slate-800 mb-2">The Diathesis-Stress Model</h3>
                            <p class="text-slate-600 mb-8">This integrative model states that a disorder develops <strong>only</strong> when a predisposition (Diathesis) is triggered by a stressor.</p>

                            <div class="bg-slate-50 p-8 rounded-xl border border-slate-200">
                                <div class="mb-6">
                                    <label for="stress-slider" class="block text-sm font-medium text-slate-700 mb-2">
                                        Environmental Stress Level: <span id="stress-val" class="font-bold text-teal-600">0</span>%
                                    </label>
                                    <input type="range" id="stress-slider" min="0" max="100" value="0" class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-teal-600">
                                </div>

                                <div class="relative h-12 bg-slate-200 rounded-full overflow-hidden mb-2">
                                    <!-- Diathesis (Static) -->
                                    <div class="absolute left-0 top-0 bottom-0 bg-blue-300 w-1/3 flex items-center justify-center text-xs font-bold text-blue-900 border-r border-white" title="Biological Predisposition">
                                        Diathesis
                                    </div>
                                    <!-- Stress (Dynamic) -->
                                    <div id="stress-bar" class="absolute left-1/3 top-0 bottom-0 bg-orange-400 w-0 transition-all duration-300 flex items-center justify-center text-xs font-bold text-orange-900 overflow-hidden">
                                        Stress
                                    </div>
                                    <!-- Threshold Line -->
                                    <div class="absolute left-[80%] top-0 bottom-0 w-1 bg-red-500 z-10"></div>
                                </div>
                                <div class="flex justify-between text-xs text-slate-400">
                                    <span>Baseline</span>
                                    <span class="text-red-500 font-bold">Disorder Threshold</span>
                                </div>

                                <div id="stress-outcome" class="mt-6 text-center font-medium text-slate-400 p-4 rounded bg-white border border-slate-100 min-h-[60px] flex items-center justify-center transition-all">
                                    Adjust stress level to test the model.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 4: DISORDERS DATABASE -->
        <section id="disorders" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-slate-900 mb-2">Major Psychological Disorders</h2>
            <p class="text-lg text-slate-600 mb-8">Browse the classifications to understand symptoms and subtypes. <span class="text-teal-600 font-semibold">Click any card for full details.</span></p>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Sidebar Filter -->
                <div class="w-full lg:w-1/4 space-y-2">
                    <button onclick="filterDisorders('all')" class="w-full text-left px-4 py-3 rounded-lg bg-teal-50 text-teal-700 font-semibold text-sm border border-teal-100 hover:bg-teal-100 transition-colors filter-btn active" data-cat="all">All Categories</button>
                    <button onclick="filterDisorders('anxiety')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="anxiety">Anxiety Disorders</button>
                    <button onclick="filterDisorders('somatoform')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="somatoform">Somatoform</button>
                    <button onclick="filterDisorders('dissociative')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="dissociative">Dissociative</button>
                    <button onclick="filterDisorders('mood')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="mood">Mood Disorders</button>
                    <button onclick="filterDisorders('schizophrenic')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="schizophrenic">Schizophrenic</button>
                    <button onclick="filterDisorders('childhood')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="childhood">Childhood/Developmental</button>
                    <button onclick="filterDisorders('substance')" class="w-full text-left px-4 py-3 rounded-lg bg-white text-slate-600 font-medium text-sm border border-slate-100 hover:bg-slate-50 transition-colors filter-btn" data-cat="substance">Substance-Use</button>
                </div>

                <!-- Cards Grid -->
                <div id="disorder-grid" class="w-full lg:w-3/4 grid grid-cols-1 md:grid-cols-2 gap-6 disorder-list max-h-[800px] overflow-y-auto p-1">
                    <!-- Cards populated by JS -->
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-300 py-12 mt-20">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <h3 class="text-xl font-bold text-white mb-4">PsychInsight</h3>
            <p class="text-sm text-slate-500 max-w-md mx-auto">
                Based on the principles of abnormal psychology. Always consult a professional for medical advice.
            </p>
        </div>
    </footer>

    <!-- Disorder Details Modal -->
    <div id="disorder-modal" class="fixed inset-0 z-50 hidden overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-slate-900 bg-opacity-75 transition-opacity" onclick="closeModal()"></div>

        <div class="flex min-h-screen items-center justify-center p-4 text-center sm:p-0">
            <!-- Modal Panel -->
            <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl modal-enter">
                <!-- Header -->
                <div class="bg-slate-50 px-4 py-5 sm:px-6 flex justify-between items-center border-b border-slate-200">
                    <div>
                        <h3 class="text-xl font-bold leading-6 text-slate-900" id="modal-title">Disorder Title</h3>
                        <p class="mt-1 text-sm text-teal-600 uppercase font-semibold tracking-wide" id="modal-category">Category</p>
                    </div>
                    <button type="button" class="rounded-md bg-white text-slate-400 hover:text-slate-500 focus:outline-none" onclick="closeModal()">
                        <span class="sr-only">Close</span>
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                
                <!-- Content -->
                <div class="px-4 py-5 sm:p-6 max-h-[70vh] overflow-y-auto">
                    <div class="space-y-6">
                        <!-- Description -->
                        <div>
                            <h4 class="text-sm font-bold text-slate-900 uppercase">Definition</h4>
                            <p class="mt-2 text-slate-600 leading-relaxed" id="modal-desc">Description text goes here.</p>
                        </div>

                        <!-- Symptoms/Traits -->
                        <div>
                            <h4 class="text-sm font-bold text-slate-900 uppercase mb-3">Key Symptoms & Features</h4>
                            <div class="bg-slate-50 rounded-lg p-4 border border-slate-100">
                                <ul class="list-disc list-inside space-y-2 text-slate-700 text-sm" id="modal-symptoms">
                                    <!-- List items -->
                                </ul>
                            </div>
                        </div>

                        <!-- Extra Details/Subtypes -->
                        <div id="modal-extras-container" class="hidden">
                            <h4 class="text-sm font-bold text-slate-900 uppercase mb-2">Subtypes / Specifics</h4>
                            <div class="prose prose-sm text-slate-600" id="modal-extras">
                                <!-- HTML content -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer -->
                <div class="bg-slate-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                    <button type="button" class="inline-flex w-full justify-center rounded-md bg-teal-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-teal-500 sm:ml-3 sm:w-auto" onclick="closeModal()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- DATA STORE (Enriched with Details) ---
        const disordersData = [
            // Anxiety
            { 
                id: 1, 
                category: 'anxiety', 
                title: 'Generalized Anxiety Disorder (GAD)', 
                desc: 'Characterized by prolonged, vague, and unpleasant feelings of fear and apprehension not attached to any specific object.', 
                traits: ['Hypervigilance', 'Motor tension', 'Vague fear'],
                details: {
                    symptoms: ['Prolonged, vague fear', 'Hypervigilance (constantly scanning for danger)', 'Motor tension (restlessness, shaking)', 'Not attached to specific object'],
                    extras: 'Anxiety is defined as a diffuse, vague, and unpleasant feeling of fear and apprehension.'
                }
            },
            { 
                id: 2, 
                category: 'anxiety', 
                title: 'Panic Disorder', 
                desc: 'Involves recurrent, unpredictable anxiety attacks causing intense terror and physical symptoms.', 
                traits: ['Intense terror', 'Palpitations/Choking', 'Fear of dying'],
                details: {
                    symptoms: ['Recurrent, unpredictable attacks', 'Intense terror', 'Physical symptoms: Palpitations, choking, chest pain', 'Fear of dying or "going crazy"'],
                    extras: 'Panic attacks often occur suddenly and can lead to secondary fears about having future attacks.'
                }
            },
            { 
                id: 3, 
                category: 'anxiety', 
                title: 'Phobias', 
                desc: 'Irrational fears of specific objects or situations.', 
                traits: ['Specific', 'Social', 'Agoraphobia'],
                details: {
                    symptoms: ['Irrational, intense fear', 'Avoidance of the object/situation'],
                    extras: '<ul class="list-disc pl-4 space-y-1"><li><strong>Specific Phobias:</strong> Fear of specific objects (e.g., animals, heights).</li><li><strong>Social Phobias:</strong> Fear of embarrassment in group situations.</li><li><strong>Agoraphobia:</strong> Fear of unfamiliar situations or leaving home.</li></ul>'
                }
            },
            { 
                id: 4, 
                category: 'anxiety', 
                title: 'Obsessive-Compulsive Disorder (OCD)', 
                desc: 'Involves obsessions (thoughts) and compulsions (acts) performed to reduce anxiety.', 
                traits: ['Intrusive thoughts', 'Repetitive acts'],
                details: {
                    symptoms: ['Obsessions: Persistent, intrusive thoughts', 'Compulsions: Repetitive acts (washing, checking)', 'Compulsions performed to check impulses or reduce anxiety'],
                    extras: 'The individual often recognizes the irrationality of the thoughts/actions but feels unable to stop them.'
                }
            },
            { 
                id: 5, 
                category: 'anxiety', 
                title: 'Post-Traumatic Stress Disorder (PTSD)', 
                desc: 'Occurs after traumatic events (disasters, war), featuring flashbacks and emotional numbing.', 
                traits: ['Flashbacks', 'Recurrent dreams', 'Emotional numbing'],
                details: {
                    symptoms: ['Flashbacks to the event', 'Recurrent dreams/nightmares', 'Emotional numbing', 'Avoidance of trauma-related stimuli'],
                    extras: 'Typically follows severe traumatic events like natural disasters, war, or assault.'
                }
            },
            
            // Somatoform
            { 
                id: 6, 
                category: 'somatoform', 
                title: 'Pain Disorders', 
                desc: 'Reports of extreme, incapacitating pain without physical basis.', 
                traits: ['Psychological origin', 'Incapacitating pain'],
                details: {
                    symptoms: ['Extreme pain reports', 'Incapacitating nature', 'No identifiable physical cause'],
                    extras: 'The pain is real to the patient but stems from psychological factors.'
                }
            },
            { 
                id: 7, 
                category: 'somatoform', 
                title: 'Somatization Disorders', 
                desc: 'Multiple, recurrent complaints (e.g., fatigue, palpitations) presented in a dramatic manner.', 
                traits: ['Fatigue', 'Palpitations', 'Exaggerated manner'],
                details: {
                    symptoms: ['Multiple recurrent complaints', 'Common issues: Fatigue, palpitations, nausea', 'Presented in a dramatic, exaggerated manner'],
                    extras: 'These individuals often visit multiple doctors seeking a diagnosis.'
                }
            },
            { 
                id: 8, 
                category: 'somatoform', 
                title: 'Conversion Disorders', 
                desc: 'Loss of basic body functions (paralysis, blindness) often following stress.', 
                traits: ['Paralysis', 'Blindness', 'Stress link'],
                details: {
                    symptoms: ['Loss of basic body functions', 'Paralysis, blindness, or deafness', 'No biological/neurological cause'],
                    extras: 'Often follows a stressful event; the psychological conflict is "converted" into a physical symptom.'
                }
            },
            { 
                id: 9, 
                category: 'somatoform', 
                title: 'Hypochondriasis', 
                desc: 'Persistent belief in having a serious illness despite medical reassurance.', 
                traits: ['Health anxiety', 'Disbelief of doctors'],
                details: {
                    symptoms: ['Persistent belief in serious illness', 'Misinterpretation of bodily symptoms', 'Persists despite medical reassurance'],
                    extras: 'Focus is on the fear of the illness rather than the symptoms themselves.'
                }
            },

            // Dissociative
            { 
                id: 10, 
                category: 'dissociative', 
                title: 'Dissociative Amnesia', 
                desc: 'Selective memory loss usually related to stressful events.', 
                traits: ['Memory gaps', 'Stress related'],
                details: {
                    symptoms: ['Selective memory loss', 'Inability to recall important personal information', 'Usually related to stressful/traumatic events'],
                    extras: 'Differs from organic amnesia (brain injury) as it is psychological in origin.'
                }
            },
            { 
                id: 11, 
                category: 'dissociative', 
                title: 'Dissociative Fugue', 
                desc: 'Unexpected travel away from home with the assumption of a new identity.', 
                traits: ['Identity assumption', 'Travel away from home'],
                details: {
                    symptoms: ['Unexpected travel away from home', 'Assumption of a new identity', 'Inability to recall the past'],
                    extras: 'The "fugue" state eventually ends, and the person may not remember the fugue period.'
                }
            },
            { 
                id: 12, 
                category: 'dissociative', 
                title: 'Dissociative Identity Disorder (DID)', 
                desc: 'The person exhibits two or more distinct personalities.', 
                traits: ['Childhood trauma link', 'Distinct alters'],
                details: {
                    symptoms: ['Presence of two or more distinct personalities', 'Personalities take control of behavior', 'Memory gaps between personalities'],
                    extras: 'Often associated with severe childhood trauma/abuse.'
                }
            },
            { 
                id: 13, 
                category: 'dissociative', 
                title: 'Depersonalization', 
                desc: 'A dreamlike state where the person feels separated from their self and reality.', 
                traits: ['Detachment', 'Unreality'],
                details: {
                    symptoms: ['Feeling separated from self', 'Sense of unreality', 'Dreamlike state'],
                    extras: 'Involves a severance of connections between ideas and emotions.'
                }
            },

            // Mood
            { 
                id: 14, 
                category: 'mood', 
                title: 'Depression', 
                desc: 'Characterized by disturbances in emotional state, including depressed mood and loss of interest.', 
                traits: ['Loss of interest', 'Guilt', 'Sleep/appetite change'],
                details: {
                    symptoms: ['Depressed mood', 'Loss of interest/pleasure', 'Changes in sleep and appetite', 'Feelings of guilt'],
                    extras: '<strong>Risk Factors:</strong> Genetics, Age (young adult women), Lack of social support.'
                }
            },
            { 
                id: 15, 
                category: 'mood', 
                title: 'Bipolar Mood Disorder', 
                desc: 'Alternating episodes of Mania and Depression.', 
                traits: ['Mania (Euphoria)', 'High activity', 'Depression'],
                details: {
                    symptoms: ['<strong>Mania:</strong> Euphoria, high activity, distractibility, rapid speech', '<strong>Depression:</strong> Low mood, lethargy, hopelessness'],
                    extras: 'Involves cycles between these two opposite poles of mood.'
                }
            },
            { 
                id: 16, 
                category: 'mood', 
                title: 'Suicide', 
                desc: 'A significant risk in mood disorders involving the intentional taking of one\'s own life.', 
                traits: ['Hopelessness', 'Isolation', 'Sudden change'],
                details: {
                    symptoms: ['Hopelessness', 'Social isolation', 'Sudden behavioral changes'],
                    extras: 'Suicide is a major risk in mood disorders. Immediate professional help is required if risks are detected.'
                }
            },

            // Schizophrenic
            { 
                id: 17, 
                category: 'schizophrenic', 
                title: 'Schizophrenia: Positive Symptoms', 
                desc: 'Excesses in functioning, such as delusions and hallucinations.', 
                traits: ['Delusions', 'Hallucinations', 'Formal Thought Disorder'],
                details: {
                    symptoms: [
                        '<strong>Delusions:</strong> False beliefs held despite evidence (e.g., Persecution, Grandeur, Reference, Control).',
                        '<strong>Hallucinations:</strong> Perceptions without stimuli (Auditory, Tactile, Visual, etc.).',
                        '<strong>Formal Thought Disorders:</strong> Illogical thinking, neologisms (new words), rapid topic shifts.'
                    ],
                    extras: 'Positive symptoms represent "additions" to normal behavior.'
                }
            },
            { 
                id: 18, 
                category: 'schizophrenic', 
                title: 'Schizophrenia: Negative Symptoms', 
                desc: 'Deficits in functioning, such as lack of emotion or speech.', 
                traits: ['Alogia', 'Flat Affect', 'Avolition'],
                details: {
                    symptoms: [
                        '<strong>Alogia:</strong> Poverty of speech.',
                        '<strong>Blunted/Flat Affect:</strong> Lack of expressed emotion.',
                        '<strong>Avolition:</strong> Apathy and inability to start or persist in activities.'
                    ],
                    extras: 'Negative symptoms represent "subtractions" from normal behavior.'
                }
            },
            { 
                id: 19, 
                category: 'schizophrenic', 
                title: 'Schizophrenia: Psychomotor', 
                desc: 'Strange movements or Catatonia.', 
                traits: ['Stupor', 'Rigidity', 'Posturing'],
                details: {
                    symptoms: ['Strange movements', '<strong>Catatonia:</strong> Stupor (no movement), rigidity, or strange posturing'],
                    extras: '<strong>Sub-types of Schizophrenia:</strong> Paranoid, Disorganized, Catatonic, Undifferentiated, and Residual.'
                }
            },

            // Childhood
            { 
                id: 20, 
                category: 'childhood', 
                title: 'ADHD', 
                desc: 'Attention Deficit Hyperactivity Disorder featuring inattention and impulsivity.', 
                traits: ['Inattention', 'Impulsivity', 'Fidgeting'],
                details: {
                    symptoms: ['Inattention (distractibility)', 'Hyperactivity (fidgeting)', 'Impulsivity (inability to wait)'],
                    extras: 'Classified as an Externalizing Disorder (Disruptive behavior).'
                }
            },
            { 
                id: 21, 
                category: 'childhood', 
                title: 'Oppositional Defiant Disorder (ODD)', 
                desc: 'Age-inappropriate stubbornness and hostility.', 
                traits: ['Hostility', 'Defiance', 'Stubbornness'],
                details: {
                    symptoms: ['Age-inappropriate stubbornness', 'Hostility toward authority', 'Defiant behavior'],
                    extras: 'Externalizing Disorder.'
                }
            },
            { 
                id: 22, 
                category: 'childhood', 
                title: 'Conduct Disorder', 
                desc: 'Violation of norms and rights of others.', 
                traits: ['Aggression', 'Theft', 'Property damage'],
                details: {
                    symptoms: ['Aggression toward people/animals', 'Theft', 'Property damage', 'Violation of rules'],
                    extras: 'Externalizing Disorder. More severe than ODD.'
                }
            },
            { 
                id: 23, 
                category: 'childhood', 
                title: 'Internalizing & Developmental', 
                desc: 'Includes Separation Anxiety, Autism, and Mental Retardation.', 
                traits: ['SAD', 'Autism', 'Intellectual Deficits'],
                details: {
                    symptoms: [
                        '<strong>Separation Anxiety Disorder (SAD):</strong> Panic when separated from parents.',
                        '<strong>Autism (Pervasive):</strong> Severe social impairment, communication issues, restricted interests.',
                        '<strong>Mental Retardation:</strong> IQ approx 70 or below, deficits in adaptive behavior (pre-18).'
                    ],
                    extras: ''
                }
            },
            { 
                id: 24, 
                category: 'childhood', 
                title: 'Eating Disorders', 
                desc: 'Distorted body image and abnormal eating habits.', 
                traits: ['Anorexia', 'Bulimia', 'Binge Eating'],
                details: {
                    symptoms: [
                        '<strong>Anorexia Nervosa:</strong> Distorted body image leading to starvation.',
                        '<strong>Bulimia Nervosa:</strong> Binge eating followed by purging.',
                        '<strong>Binge Eating:</strong> Frequent out-of-control eating without purging.'
                    ],
                    extras: ''
                }
            },

            // Substance
            { 
                id: 26, 
                category: 'substance', 
                title: 'Substance Dependence & Abuse', 
                desc: 'Intense craving, tolerance, withdrawal, or adverse consequences.', 
                traits: ['Craving', 'Tolerance', 'Withdrawal'],
                details: {
                    symptoms: [
                        '<strong>Dependence:</strong> Intense craving, Tolerance (needing more), Withdrawal symptoms.',
                        '<strong>Abuse:</strong> Recurrent use leading to adverse social/occupational consequences.'
                    ],
                    extras: '<strong>Common Substances:</strong><br>‚Ä¢ Alcohol: Depresses CNS, affects judgment.<br>‚Ä¢ Heroin: Interferes with social functioning, risk of overdose.<br>‚Ä¢ Cocaine: Intoxication and depressive crashes.'
                }
            }
        ];

        // --- CHART JS INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            renderDisorders(disordersData);
            initCharts();
            setupStressModel();
        });

        function initCharts() {
            const ctx = document.getElementById('bioChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Anxiety', 'Schizophrenia', 'Depression'],
                    datasets: [{
                        label: 'GABA',
                        data: [-1, 0, 0], // -1 for low
                        backgroundColor: '#f43f5e', // Rose
                        borderRadius: 4
                    }, {
                        label: 'Dopamine',
                        data: [0, 1, 0], // 1 for High
                        backgroundColor: '#14b8a6', // Teal
                        borderRadius: 4
                    }, {
                        label: 'Serotonin',
                        data: [0, 0, -1], // -1 for low
                        backgroundColor: '#f59e0b', // Amber
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            min: -1.5,
                            max: 1.5,
                            ticks: {
                                callback: function(value) {
                                    if(value === -1) return 'Low Activity';
                                    if(value === 1) return 'Excess Activity';
                                    if(value === 0) return 'Normal';
                                    return '';
                                }
                            },
                            grid: {
                                color: '#e2e8f0'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const val = context.raw;
                                    const neurotransmitter = context.dataset.label;
                                    let status = val === -1 ? 'Low Activity' : (val === 1 ? 'Excess Activity' : 'Normal');
                                    return `${neurotransmitter}: ${status}`;
                                }
                            }
                        }
                    }
                }
            });
        }

        // --- INTERACTIVITY FUNCTIONS ---

        // 1. Navigation Scroll
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        }

        // 2. 4Ds Card Toggle
        function toggleCard(card) {
            // Visual feedback handled by CSS
        }

        // 3. Approaches Switcher
        function setApproach(type) {
            document.getElementById('content-norms').classList.add('hidden');
            document.getElementById('content-maladaptive').classList.add('hidden');
            
            document.getElementById(`content-${type}`).classList.remove('hidden');
            
            // Toggle active button styles
            const btnNorms = document.getElementById('btn-norms');
            const btnMal = document.getElementById('btn-maladaptive');
            
            if(type === 'norms') {
                btnNorms.className = "px-4 py-2 text-sm font-medium rounded-md bg-white shadow-sm text-slate-800 transition-all";
                btnMal.className = "px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all";
            } else {
                btnMal.className = "px-4 py-2 text-sm font-medium rounded-md bg-white shadow-sm text-slate-800 transition-all";
                btnNorms.className = "px-4 py-2 text-sm font-medium rounded-md text-slate-600 hover:bg-white/50 transition-all";
            }
        }

        // 4. Etiology Tabs
        function switchEtiologyTab(tabId) {
            document.querySelectorAll('.etiology-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`tab-${tabId}`).classList.remove('hidden');
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'text-teal-600', 'font-semibold');
                btn.classList.add('text-slate-500');
            });
            const activeBtn = Array.from(document.querySelectorAll('.tab-btn')).find(b => b.getAttribute('onclick').includes(tabId));
            if(activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.classList.remove('text-slate-500');
            }
        }

        // 5. Diathesis Stress Logic
        function setupStressModel() {
            const slider = document.getElementById('stress-slider');
            const stressBar = document.getElementById('stress-bar');
            const valDisplay = document.getElementById('stress-val');
            const outcome = document.getElementById('stress-outcome');

            slider.addEventListener('input', (e) => {
                const val = parseInt(e.target.value);
                valDisplay.innerText = val;
                
                const stressWidth = val * 0.6; 
                stressBar.style.width = `${stressWidth}%`;
                
                const totalLoad = 33 + stressWidth;
                
                if(totalLoad > 80) {
                    outcome.innerText = "‚ö† Disorder Triggered! (Threshold Exceeded)";
                    outcome.className = "mt-6 text-center font-bold text-red-700 bg-red-50 p-4 rounded border border-red-200 min-h-[60px] flex items-center justify-center transition-all";
                    stressBar.classList.remove('bg-orange-400');
                    stressBar.classList.add('bg-red-500');
                } else {
                    outcome.innerText = "Status: Healthy Adaptation";
                    outcome.className = "mt-6 text-center font-medium text-emerald-700 bg-emerald-50 p-4 rounded border border-emerald-200 min-h-[60px] flex items-center justify-center transition-all";
                    stressBar.classList.add('bg-orange-400');
                    stressBar.classList.remove('bg-red-500');
                }
            });
        }

        // 6. Disorder Filtering & Rendering
        function filterDisorders(category) {
            // Style Buttons
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if(btn.dataset.cat === category) {
                    btn.classList.remove('bg-white', 'text-slate-600', 'border-slate-100');
                    btn.classList.add('bg-teal-50', 'text-teal-700', 'border-teal-100', 'font-semibold');
                } else {
                    btn.classList.add('bg-white', 'text-slate-600', 'border-slate-100');
                    btn.classList.remove('bg-teal-50', 'text-teal-700', 'border-teal-100', 'font-semibold');
                }
            });

            // Filter Data
            const filtered = category === 'all' 
                ? disordersData 
                : disordersData.filter(d => d.category === category);
            
            renderDisorders(filtered);
        }

        function renderDisorders(data) {
            const grid = document.getElementById('disorder-grid');
            grid.innerHTML = '';

            data.forEach(item => {
                const traitsHtml = item.traits.map(t => 
                    `<span class="inline-block bg-slate-100 rounded-full px-2 py-1 text-xs font-semibold text-slate-600 mr-1 mb-1">${t}</span>`
                ).join('');

                const card = document.createElement('div');
                card.className = "bg-white p-5 rounded-lg border border-slate-200 hover:shadow-md transition-shadow cursor-pointer relative group";
                card.onclick = () => openModal(item.id);
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-slate-800 text-lg group-hover:text-teal-600 transition-colors">${item.title}</h4>
                        <span class="text-[10px] uppercase tracking-wider font-bold text-slate-400 border border-slate-200 px-1 rounded">${item.category}</span>
                    </div>
                    <p class="text-slate-600 text-sm mb-4 min-h-[40px]">${item.desc}</p>
                    <div class="mb-2">${traitsHtml}</div>
                    <div class="text-xs text-teal-600 font-medium opacity-0 group-hover:opacity-100 transition-opacity absolute bottom-3 right-5">Click for details &rarr;</div>
                `;
                grid.appendChild(card);
            });
        }

        // 7. Modal Logic
        function openModal(id) {
            const data = disordersData.find(d => d.id === id);
            if(!data) return;

            document.getElementById('modal-title').innerText = data.title;
            document.getElementById('modal-category').innerText = data.category + " Disorder";
            document.getElementById('modal-desc').innerText = data.desc;

            // Populate Symptoms List
            const symptomsList = document.getElementById('modal-symptoms');
            symptomsList.innerHTML = '';
            if (data.details && data.details.symptoms) {
                data.details.symptoms.forEach(sym => {
                    const li = document.createElement('li');
                    li.innerHTML = sym; // Allow HTML for bolding
                    symptomsList.appendChild(li);
                });
            }

            // Populate Extras (if any)
            const extrasContainer = document.getElementById('modal-extras-container');
            const extrasContent = document.getElementById('modal-extras');
            if (data.details && data.details.extras) {
                extrasContent.innerHTML = data.details.extras;
                extrasContainer.classList.remove('hidden');
            } else {
                extrasContainer.classList.add('hidden');
            }

            document.getElementById('disorder-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('disorder-modal').classList.add('hidden');
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") {
                closeModal();
            }
        });
    </script>
</body>
</html>
